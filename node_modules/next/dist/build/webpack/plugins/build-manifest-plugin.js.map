{"version":3,"sources":["../../../../build/webpack/plugins/build-manifest-plugin.ts"],"names":["BuildManifestPlugin","constructor","options","buildId","isDevFallback","rewrites","beforeFiles","afterFiles","fallback","appDirEnabled","map","processRoute","exportRuntime","createAssets","compiler","compilation","assets","compilationSpan","spans","get","createAssetsSpan","traceChild","traceFn","entrypoints","assetMap","polyfillFiles","devFiles","ampDevFiles","lowPriorityFiles","rootMainFiles","pages","ampFirstPages","ampFirstEntryNames","ampFirstEntryNamesMap","entryName","pagePath","getRouteFromEntrypoint","push","mainFiles","Set","getEntrypointFiles","CLIENT_STATIC_FILES_RUNTIME_MAIN","CLIENT_STATIC_FILES_RUNTIME_MAIN_ROOT","compilationAssets","getAssets","filter","p","name","endsWith","info","CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL","v","CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH","file","has","CLIENT_STATIC_FILES_RUNTIME_AMP","systemEntrypoints","entrypoint","values","filesForPage","CLIENT_STATIC_FILES_PATH","srcEmptySsgManifest","ssgManifestPath","sources","RawSource","Object","keys","sort","reduce","a","c","buildManifestName","BUILD_MANIFEST","JSON","stringify","MIDDLEWARE_BUILD_MANIFEST","clientManifestPath","generateClientManifest","apply","hooks","make","tap","processAssets","stage","webpack","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS","genClientManifestSpan","clientManifest","__rewrites","appDependencies","sortedPageKeys","getSortedRoutes","forEach","page","dependencies","filteredDeps","dep","length","sortedPages","devalue","getFiles","test","replace","r","rewrite","destination","startsWith"],"mappings":"AAAA;;;;;AAAoB,IAAA,QAA4B,kCAA5B,4BAA4B,EAAA;AACf,IAAA,QAAoC,WAApC,oCAAoC,CAAA;AAU9D,IAAA,UAA+B,WAA/B,+BAA+B,CAAA;AAEH,IAAA,uBAA2C,kCAA3C,2CAA2C,EAAA;AACxC,IAAA,yBAAgC,WAAhC,gCAAgC,CAAA;AAEtC,IAAA,MAAkC,WAAlC,kCAAkC,CAAA;AAC5C,IAAA,gBAAoB,WAApB,oBAAoB,CAAA;AA4E3B,MAAMA,mBAAmB;IAOtCC,YAAYC,OAMX,CAAE;QACD,IAAI,CAACC,OAAO,GAAGD,OAAO,CAACC,OAAO;QAC9B,IAAI,CAACC,aAAa,GAAG,CAAC,CAACF,OAAO,CAACE,aAAa;QAC5C,IAAI,CAACC,QAAQ,GAAG;YACdC,WAAW,EAAE,EAAE;YACfC,UAAU,EAAE,EAAE;YACdC,QAAQ,EAAE,EAAE;SACb;QACD,IAAI,CAACC,aAAa,GAAGP,OAAO,CAACO,aAAa;QAC1C,IAAI,CAACJ,QAAQ,CAACC,WAAW,GAAGJ,OAAO,CAACG,QAAQ,CAACC,WAAW,CAACI,GAAG,CAACC,YAAY,CAAC;QAC1E,IAAI,CAACN,QAAQ,CAACE,UAAU,GAAGL,OAAO,CAACG,QAAQ,CAACE,UAAU,CAACG,GAAG,CAACC,YAAY,CAAC;QACxE,IAAI,CAACN,QAAQ,CAACG,QAAQ,GAAGN,OAAO,CAACG,QAAQ,CAACG,QAAQ,CAACE,GAAG,CAACC,YAAY,CAAC;QACpE,IAAI,CAACC,aAAa,GAAG,CAAC,CAACV,OAAO,CAACU,aAAa;KAC7C;IAEDC,YAAY,CAACC,QAAa,EAAEC,WAAgB,EAAEC,MAAW,EAAE;QACzD,MAAMC,eAAe,GAAGC,gBAAK,MAAA,CAACC,GAAG,CAACJ,WAAW,CAAC,IAAIG,gBAAK,MAAA,CAACC,GAAG,CAACL,QAAQ,CAAC;QACrE,MAAMM,gBAAgB,GAAGH,eAAe,QAAY,GAA3BA,KAAAA,CAA2B,GAA3BA,eAAe,CAAEI,UAAU,CAClD,kCAAkC,CACnC;QACD,OAAOD,gBAAgB,QAAS,GAAzBA,KAAAA,CAAyB,GAAzBA,gBAAgB,CAAEE,OAAO,CAAC,IAAM;YACrC,MAAMC,WAAW,GAAqBR,WAAW,CAACQ,WAAW;YAC7D,MAAMC,QAAQ,GAA+B;gBAC3CC,aAAa,EAAE,EAAE;gBACjBC,QAAQ,EAAE,EAAE;gBACZC,WAAW,EAAE,EAAE;gBACfC,gBAAgB,EAAE,EAAE;gBACpBC,aAAa,EAAE,EAAE;gBACjBC,KAAK,EAAE;oBAAE,OAAO,EAAE,EAAE;iBAAE;gBACtBC,aAAa,EAAE,EAAE;aAClB;YAED,MAAMC,kBAAkB,GAAGC,yBAAqB,sBAAA,CAACd,GAAG,CAACJ,WAAW,CAAC;YACjE,IAAIiB,kBAAkB,EAAE;gBACtB,KAAK,MAAME,SAAS,IAAIF,kBAAkB,CAAE;oBAC1C,MAAMG,QAAQ,GAAGC,CAAAA,GAAAA,uBAAsB,AAAW,CAAA,QAAX,CAACF,SAAS,CAAC;oBAClD,IAAI,CAACC,QAAQ,EAAE;wBACb,SAAQ;qBACT;oBAEDX,QAAQ,CAACO,aAAa,CAACM,IAAI,CAACF,QAAQ,CAAC;iBACtC;aACF;YAED,MAAMG,SAAS,GAAG,IAAIC,GAAG,CACvBC,kBAAkB,CAACjB,WAAW,CAACJ,GAAG,CAACsB,UAAgC,iCAAA,CAAC,CAAC,CACtE;YAED,IAAI,IAAI,CAAChC,aAAa,EAAE;gBACtBe,QAAQ,CAACK,aAAa,GAAG;uBACpB,IAAIU,GAAG,CACRC,kBAAkB,CAChBjB,WAAW,CAACJ,GAAG,CAACuB,UAAqC,sCAAA,CAAC,CACvD,CACF;iBACF;aACF;YAED,MAAMC,iBAAiB,GAIjB5B,WAAW,CAAC6B,SAAS,EAAE;YAE7BpB,QAAQ,CAACC,aAAa,GAAGkB,iBAAiB,CACvCE,MAAM,CAAC,CAACC,CAAC,GAAK;gBACb,2CAA2C;gBAC3C,IAAI,CAACA,CAAC,CAACC,IAAI,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAE;oBAC3B,OAAO,KAAK,CAAA;iBACb;gBAED,OACEF,CAAC,CAACG,IAAI,IAAIC,UAA4C,6CAAA,IAAIJ,CAAC,CAACG,IAAI,CACjE;aACF,CAAC,CACDvC,GAAG,CAAC,CAACyC,CAAC,GAAKA,CAAC,CAACJ,IAAI,CAAC;YAErBvB,QAAQ,CAACE,QAAQ,GAAGc,kBAAkB,CACpCjB,WAAW,CAACJ,GAAG,CAACiC,UAAyC,0CAAA,CAAC,CAC3D,CAACP,MAAM,CAAC,CAACQ,IAAI,GAAK,CAACf,SAAS,CAACgB,GAAG,CAACD,IAAI,CAAC,CAAC;YAExC7B,QAAQ,CAACG,WAAW,GAAGa,kBAAkB,CACvCjB,WAAW,CAACJ,GAAG,CAACoC,UAA+B,gCAAA,CAAC,CACjD;YAED,MAAMC,iBAAiB,GAAG,IAAIjB,GAAG,CAAC;gBAChCE,UAAgC,iCAAA;gBAChCW,UAAyC,0CAAA;gBACzCG,UAA+B,gCAAA;mBAC3B,IAAI,CAAC9C,aAAa,GAAG;oBAACiC,UAAqC,sCAAA;iBAAC,GAAG,EAAE;aACtE,CAAC;YAEF,KAAK,MAAMe,UAAU,IAAI1C,WAAW,CAACQ,WAAW,CAACmC,MAAM,EAAE,CAAE;gBACzD,IAAIF,iBAAiB,CAACF,GAAG,CAACG,UAAU,CAACV,IAAI,CAAC,EAAE,SAAQ;gBACpD,MAAMZ,QAAQ,GAAGC,CAAAA,GAAAA,uBAAsB,AAAiB,CAAA,QAAjB,CAACqB,UAAU,CAACV,IAAI,CAAC;gBAExD,IAAI,CAACZ,QAAQ,EAAE;oBACb,SAAQ;iBACT;gBAED,MAAMwB,YAAY,GAAGnB,kBAAkB,CAACiB,UAAU,CAAC;gBAEnDjC,QAAQ,CAACM,KAAK,CAACK,QAAQ,CAAC,GAAG;uBAAI,IAAII,GAAG,CAAC;2BAAID,SAAS;2BAAKqB,YAAY;qBAAC,CAAC;iBAAC;aACzE;YAED,IAAI,CAAC,IAAI,CAACvD,aAAa,EAAE;gBACvB,qEAAqE;gBACrE,uEAAuE;gBACvE,4BAA4B;gBAC5BoB,QAAQ,CAACI,gBAAgB,CAACS,IAAI,CAC5B,CAAC,EAAEuB,UAAwB,yBAAA,CAAC,CAAC,EAAE,IAAI,CAACzD,OAAO,CAAC,kBAAkB,CAAC,CAChE;gBACD,sEAAsE;gBACtE,kEAAkE;gBAClE,cAAc;gBACd,MAAM0D,mBAAmB,GAAG,CAAC,4EAA4E,CAAC;gBAE1G,MAAMC,eAAe,GAAG,CAAC,EAAEF,UAAwB,yBAAA,CAAC,CAAC,EAAE,IAAI,CAACzD,OAAO,CAAC,gBAAgB,CAAC;gBACrFqB,QAAQ,CAACI,gBAAgB,CAACS,IAAI,CAACyB,eAAe,CAAC;gBAC/C9C,MAAM,CAAC8C,eAAe,CAAC,GAAG,IAAIC,QAAO,QAAA,CAACC,SAAS,CAACH,mBAAmB,CAAC;aACrE;YAEDrC,QAAQ,CAACM,KAAK,GAAGmC,MAAM,CAACC,IAAI,CAAC1C,QAAQ,CAACM,KAAK,CAAC,CACzCqC,IAAI,EAAE,AACP,2BAA2B;aAC1BC,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,GAAK,CAAC,AAACD,CAAC,CAACC,CAAC,CAAC,GAAG9C,QAAQ,CAACM,KAAK,CAACwC,CAAC,CAAC,EAAGD,CAAC,CAAC,EAAE,EAAE,CAAQ;YAE/D,IAAIE,iBAAiB,GAAGC,UAAc,eAAA;YAEtC,IAAI,IAAI,CAACpE,aAAa,EAAE;gBACtBmE,iBAAiB,GAAG,CAAC,SAAS,EAAEC,UAAc,eAAA,CAAC,CAAC;aACjD;YAEDxD,MAAM,CAACuD,iBAAiB,CAAC,GAAG,IAAIR,QAAO,QAAA,CAACC,SAAS,CAC/CS,IAAI,CAACC,SAAS,CAAClD,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAClC;YAED,IAAI,IAAI,CAACZ,aAAa,EAAE;gBACtBI,MAAM,CAAC,CAAC,OAAO,EAAE2D,UAAyB,0BAAA,CAAC,GAAG,CAAC,CAAC,GAC9C,IAAIZ,QAAO,QAAA,CAACC,SAAS,CACnB,CAAC,sBAAsB,EAAES,IAAI,CAACC,SAAS,CAAClD,QAAQ,CAAC,CAAC,CAAC,CACpD;aACJ;YAED,IAAI,CAAC,IAAI,CAACpB,aAAa,EAAE;gBACvB,MAAMwE,kBAAkB,GAAG,CAAC,EAAEhB,UAAwB,yBAAA,CAAC,CAAC,EAAE,IAAI,CAACzD,OAAO,CAAC,kBAAkB,CAAC;gBAE1Fa,MAAM,CAAC4D,kBAAkB,CAAC,GAAG,IAAIb,QAAO,QAAA,CAACC,SAAS,CAChD,CAAC,wBAAwB,EAAEa,sBAAsB,CAC/C/D,QAAQ,EACRC,WAAW,EACXS,QAAQ,EACR,IAAI,CAACnB,QAAQ,CACd,CAAC,uDAAuD,CAAC,CAC3D;aACF;YAED,OAAOW,MAAM,CAAA;SACd,CAAC,CAAA;KACH;IAED8D,KAAK,CAAChE,QAA0B,EAAE;QAChCA,QAAQ,CAACiE,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,qBAAqB,EAAE,CAAClE,WAAW,GAAK;YAC9D,0DAA0D;YAC1DA,WAAW,CAACgE,KAAK,CAACG,aAAa,CAACD,GAAG,CACjC;gBACElC,IAAI,EAAE,qBAAqB;gBAC3B,0DAA0D;gBAC1DoC,KAAK,EAAEC,QAAO,QAAA,CAACC,WAAW,CAACC,8BAA8B;aAC1D,EACD,CAACtE,MAAW,GAAK;gBACf,IAAI,CAACH,YAAY,CAACC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,CAAC;aACjD,CACF;SACF,CAAC;QACF,OAAM;KACP;CACF;kBA9LoBhB,mBAAmB;;;;;;AArExC,mFAAmF;AACnF,yCAAyC;AACzC,SAAS6E,sBAAsB,CAC7B/D,QAAa,EACbC,WAAgB,EAChBS,QAAuB,EACvBnB,QAAkC,EACd;IACpB,MAAMY,eAAe,GAAGC,gBAAK,MAAA,CAACC,GAAG,CAACJ,WAAW,CAAC,IAAIG,gBAAK,MAAA,CAACC,GAAG,CAACL,QAAQ,CAAC;IACrE,MAAMyE,qBAAqB,GAAGtE,eAAe,QAAY,GAA3BA,KAAAA,CAA2B,GAA3BA,eAAe,CAAEI,UAAU,CACvD,4CAA4C,CAC7C;IAED,OAAOkE,qBAAqB,QAAS,GAA9BA,KAAAA,CAA8B,GAA9BA,qBAAqB,CAAEjE,OAAO,CAAC,IAAM;QAC1C,MAAMkE,cAAc,GAAwB;YAC1C,iDAAiD;YACjDC,UAAU,EAAEpF,QAAQ;SACrB;QACD,MAAMqF,eAAe,GAAG,IAAInD,GAAG,CAACf,QAAQ,CAACM,KAAK,CAAC,OAAO,CAAC,CAAC;QACxD,MAAM6D,cAAc,GAAGC,CAAAA,GAAAA,MAAe,AAA6B,CAAA,gBAA7B,CAAC3B,MAAM,CAACC,IAAI,CAAC1C,QAAQ,CAACM,KAAK,CAAC,CAAC;QAEnE6D,cAAc,CAACE,OAAO,CAAC,CAACC,IAAI,GAAK;YAC/B,MAAMC,YAAY,GAAGvE,QAAQ,CAACM,KAAK,CAACgE,IAAI,CAAC;YAEzC,IAAIA,IAAI,KAAK,OAAO,EAAE,OAAM;YAC5B,6EAA6E;YAC7E,wDAAwD;YACxD,MAAME,YAAY,GAAGD,YAAY,CAAClD,MAAM,CACtC,CAACoD,GAAG,GAAK,CAACP,eAAe,CAACpC,GAAG,CAAC2C,GAAG,CAAC,CACnC;YAED,2DAA2D;YAC3D,IAAID,YAAY,CAACE,MAAM,EAAE;gBACvBV,cAAc,CAACM,IAAI,CAAC,GAAGE,YAAY;aACpC;SACF,CAAC;QACF,6EAA6E;QAC7E,qEAAqE;QACrER,cAAc,CAACW,WAAW,GAAGR,cAAc;QAE3C,OAAOS,CAAAA,GAAAA,QAAO,AAAgB,CAAA,QAAhB,CAACZ,cAAc,CAAC,CAAA;KAC/B,CAAC,CAAA;CACH;AAED,SAAShD,kBAAkB,CAACiB,UAAe,EAAY;QAEnDA,GAMkD;IAPpD,OACEA,CAAAA,GAMkD,GANlDA,UAAU,QACE,GADZA,KAAAA,CACY,GADZA,UAAU,CACN4C,QAAQ,EAAE,CACXxD,MAAM,CAAC,CAACQ,IAAY,GAAK;QACxB,wEAAwE;QACxE,OAAO,oCAAoCiD,IAAI,CAACjD,IAAI,CAAC,CAAA;KACtD,EACA3C,GAAG,CAAC,CAAC2C,IAAY,GAAKA,IAAI,CAACkD,OAAO,QAAQ,GAAG,CAAC,CAAC,YANlD9C,GAMkD,GAAI,EAAE,CACzD;CACF;AAED,MAAM9C,YAAY,GAAG,CAAC6F,CAAU,GAAK;IACnC,MAAMC,OAAO,GAAG;QAAE,GAAGD,CAAC;KAAE;IAExB,wDAAwD;IACxD,sBAAsB;IACtB,IAAI,CAACC,OAAO,CAACC,WAAW,CAACC,UAAU,CAAC,GAAG,CAAC,EAAE;QACxC,OAAO,AAACF,OAAO,CAASC,WAAW;KACpC;IACD,OAAOD,OAAO,CAAA;CACf"}