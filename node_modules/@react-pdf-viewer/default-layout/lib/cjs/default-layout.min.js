"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@react-pdf-viewer/core"),t=require("react"),n=require("@react-pdf-viewer/attachment"),a=require("@react-pdf-viewer/bookmark"),r=require("@react-pdf-viewer/thumbnail"),o=require("@react-pdf-viewer/toolbar");function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var c=l(t),u=function(){return c.createElement(e.Icon,{size:16},c.createElement("path",{d:"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\n            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\n            c0.552,0,1,0.448,1,1L11.5,10.5z\n            M14.5,6.499h6\n            M14.5,10.499h6\n            M3.5,14.499h17\n            M3.5,18.499h16.497"}))},i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},s=function(){return c.createElement(e.Icon,{size:16},c.createElement("path",{d:"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\n            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\n            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9"}))},d=function(){return c.createElement(e.Icon,{size:16},c.createElement("path",{d:"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\n            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\n            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z"}))},f={left:8,top:0},m={left:-8,top:0},b=function(t){var n=t.attachmentTabContent,a=t.bookmarkTabContent,r=t.store,o=t.thumbnailTabContent,l=t.tabs,i=c.useRef(),b=c.useContext(e.LocalizationContext).l10n,h=c.useState(!1),v=h[0],y=h[1],p=c.useState(Math.max(r.get("currentTab")||0,0)),_=p[0],g=p[1],E=c.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,T=[{content:o,icon:c.createElement(d,null),title:b&&b.defaultLayout?b.defaultLayout.thumbnail:"Thumbnail"},{content:a,icon:c.createElement(u,null),title:b&&b.defaultLayout?b.defaultLayout.bookmark:"Bookmark"},{content:n,icon:c.createElement(s,null),title:b&&b.defaultLayout?b.defaultLayout.attachment:"Attachment"}],L=l?l(T):T,P=function(e){e>=0&&e<=L.length-1&&(y(!0),g(e))};return c.useEffect((function(){return r.subscribe("currentTab",P),function(){r.unsubscribe("currentTab",P)}}),[]),0===L.length?c.createElement(c.Fragment,null):c.createElement(c.Fragment,null,c.createElement("div",{"data-testid":"default-layout__sidebar",className:e.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":v,"rpv-default-layout__sidebar--ltr":!E,"rpv-default-layout__sidebar--rtl":E}),ref:i},c.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},c.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},L.map((function(t,n){return c.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":_===n,key:n,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(n),role:"tab"},c.createElement(e.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(n),position:E?e.Position.LeftCenter:e.Position.RightCenter,target:c.createElement(e.MinimalButton,{ariaLabel:t.title,isSelected:_===n,onClick:function(){return function(e){if(_===e){y((function(e){return!e}));var t=i.current;t&&t.style.width&&t.style.removeProperty("width")}else P(e)}(n)}},t.icon),content:function(){return t.title},offset:E?m:f}))}))),c.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(_),id:"rpv-default-layout__sidebar-content",className:e.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":v,"rpv-default-layout__sidebar-content--ltr":!E,"rpv-default-layout__sidebar-content--rtl":E}),role:"tabpanel",tabIndex:-1},L[_].content))),v&&c.createElement(e.Splitter,{constrain:function(e){return e.firstHalfPercentage>=20&&e.firstHalfPercentage<=80}}))};exports.BookmarkIcon=u,exports.FileIcon=s,exports.ThumbnailIcon=d,exports.defaultLayoutPlugin=function(t){var l=c.useMemo((function(){return e.createStore({currentTab:0})}),[]),u=n.attachmentPlugin(),s=a.bookmarkPlugin(),d=r.thumbnailPlugin(t?t.thumbnailPlugin:{}),f=o.toolbarPlugin(t?t.toolbarPlugin:{}),m=u.Attachments,h=s.Bookmarks,v=d.Thumbnails,y=f.Toolbar,p=t?t.sidebarTabs:function(e){return e},_=[u,s,d,f];return{attachmentPluginInstance:u,bookmarkPluginInstance:s,thumbnailPluginInstance:d,toolbarPluginInstance:f,activateTab:function(e){l.update("currentTab",e)},install:function(e){_.forEach((function(t){t.install&&t.install(e)}))},renderPageLayer:function(e){return c.createElement(c.Fragment,null,_.map((function(t,n){return t.renderPageLayer?c.createElement(c.Fragment,{key:n},t.renderPageLayer(e)):c.createElement(c.Fragment,{key:n},c.createElement(c.Fragment,null))})))},renderViewer:function(n){var a=n.slot;_.forEach((function(e){e.renderViewer&&(a=e.renderViewer(i(i({},n),{slot:a})))}));var r=a.subSlot&&a.subSlot.attrs?{className:a.subSlot.attrs.className,"data-testid":a.subSlot.attrs["data-testid"],ref:a.subSlot.attrs.ref,style:a.subSlot.attrs.style}:{};return a.children=c.createElement("div",{className:"rpv-default-layout__container"},c.createElement("div",{"data-testid":"default-layout__main",className:e.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":n.themeContext.direction===e.TextDirection.RightToLeft})},c.createElement(b,{attachmentTabContent:c.createElement(m,null),bookmarkTabContent:c.createElement(h,null),store:l,thumbnailTabContent:c.createElement(v,null),tabs:p}),c.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},c.createElement("div",{className:"rpv-default-layout__toolbar"},t&&t.renderToolbar?t.renderToolbar(y):c.createElement(y,null)),c.createElement("div",i({},r),a.subSlot.children))),a.children),a.subSlot.attrs={},a.subSlot.children=c.createElement(c.Fragment,null),a},uninstall:function(e){_.forEach((function(t){t.uninstall&&t.uninstall(e)}))},onDocumentLoad:function(e){_.forEach((function(t){t.onDocumentLoad&&t.onDocumentLoad(e)})),t&&t.setInitialTab&&t.setInitialTab(e.doc).then((function(e){l.update("currentTab",e)}))},onAnnotationLayerRender:function(e){_.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender(e)}))},onTextLayerRender:function(e){_.forEach((function(t){t.onTextLayerRender&&t.onTextLayerRender(e)}))},onViewerStateChange:function(e){var t=e;return _.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),t}}},exports.setInitialTabFromPageMode=function(t){return new Promise((function(n,a){t.getPageMode().then((function(t){if(t)switch(t){case e.PageMode.Attachments:n(2);break;case e.PageMode.Bookmarks:n(1);break;case e.PageMode.Thumbnails:n(0);break;default:n(-1)}else n(-1)}))}))};
